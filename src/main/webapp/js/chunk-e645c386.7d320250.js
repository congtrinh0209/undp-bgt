(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e645c386"],{"0e8f":function(t,e,i){"use strict";i("20f6");var a=i("e8f2");e["a"]=Object(a["a"])("flex")},3431:function(t,e,i){},"3c93":function(t,e,i){},"4bd4":function(t,e,i){"use strict";var a=i("58df"),s=i("7e2b"),n=i("3206");e["a"]=Object(a["a"])(s["a"],Object(n["b"])("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",e=>{this.$set(this.errorBag,t._uid,e)},{immediate:!0}),i={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",a=>{a&&(this.errorBag.hasOwnProperty(t._uid)||(i.valid=e(t)))}):i.valid=e(t),i},validate(){return 0===this.inputs.filter(t=>!t.validate(!0)).length},reset(){this.inputs.forEach(t=>t.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(t=>t.resetValidation()),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find(e=>e._uid===t._uid);if(!e)return;const i=this.watchers.find(t=>t._uid===e._uid);i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter(t=>t._uid!==e._uid),this.inputs=this.inputs.filter(t=>t._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},a4e6:function(t,e,i){"use strict";i("3431")},a523:function(t,e,i){"use strict";i("20f6"),i("4b85");var a=i("e8f2"),s=i("d9f7");e["a"]=Object(a["a"])("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(t,{props:e,data:i,children:a}){let n;const{attrs:o}=i;return o&&(i.attrs={},n=Object.keys(o).filter(t=>{if("slot"===t)return!1;const e=o[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e})),e.id&&(i.domProps=i.domProps||{},i.domProps.id=e.id),t(e.tag,Object(s["a"])(i,{staticClass:"container",class:Array({"container--fluid":e.fluid}).concat(n||[])}),a)}})},a55b:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap-login"},[i("v-container",{staticClass:"px-0 pt-0",attrs:{id:"login-page",fluid:"",tag:"section"}},[i("div",{staticClass:"container-wrap"},[i("div",{staticClass:"wrap-title"},[i("div",{staticClass:"d-flex justify-end py-0 pb-0 my-0 px-5"},t._l(t.languages,(function(e){return i("button",{key:e.title,on:{click:function(i){return t.changeLocale(e.language)}}},[i("flag",{attrs:{iso:e.flag,squared:!1}}),t._v(" "+t._s(e.title)+" ")],1)})),0),i("v-flex",{staticStyle:{"text-align":"center"}},[i("img",{staticClass:"img-login-logo",attrs:{src:t.publicPath+"/images/image-logo.png?t=93111413"}})]),i("v-flex",{staticClass:"wrap-title pt-1 mb-2"},[i("div",{staticClass:"text-1"},[t._v(t._s(t.$t("login.welcomeMsg1"))+" ")]),i("div",{staticClass:"text-2"},[t._v(t._s(t.$t("login.welcomeMsg2")))])])],1),t.signed?t._e():i("div",{staticClass:"wrap-form px-4 py-3"},[i("div",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-flex",{staticClass:"action-title mb-5",staticStyle:{"text-align":"center","font-size":"22px","font-family":"'Roboto Slab'",color:"#fff","font-weight":"700"},attrs:{xs12:""}},[i("div",[t._v(t._s(t.$t("login.loginMsg")))])]),i("v-flex",{attrs:{xs12:""}},[i("span",{staticStyle:{color:"white"}},[t._v(t._s(t.$t("login.tenDangNhap")))]),i("v-text-field",{staticClass:"input-text",attrs:{dense:"",rules:[function(e){return!!e||t.$t("login.batBuocTenDangNhap")}],required:"","prepend-inner-icon":"mdi-account","hide-details":"auto"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login.apply(null,arguments)}},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),i("v-flex",{staticStyle:{"margin-top":"15px"},attrs:{xs12:""}},[i("span",{staticStyle:{color:"white"}},[t._v(t._s(t.$t("login.matKhau")))]),i("v-text-field",{staticClass:"input-text",attrs:{dense:"",type:"password",rules:[function(e){return!!e||t.$t("login.batBuocMatKhau")}],required:"","prepend-inner-icon":"mdi-key","hide-details":"auto"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login.apply(null,arguments)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),i("v-flex",{staticClass:"wrap-btn-login",staticStyle:{"margin-top":"30px","margin-bottom":"20px"},attrs:{xs12:""}},[i("v-btn",{staticClass:"my-0 white--text mr-3 btn-login",staticStyle:{padding:"0 15px !important"},attrs:{loading:t.loading,disabled:t.loading},on:{click:t.login}},[i("v-icon",{attrs:{size:"20"}},[t._v("mdi-login")]),t._v("  "+t._s(t.$t("login.loginMsg"))+" ")],1)],1)],1)],1)]),t.signed?i("div",{staticClass:"wrap-form px-3 py-3"},[i("div",{staticClass:"text-login"},[t._v("TÀI KHOẢN ĐÃ ĐĂNG NHẬP HỆ THỐNG")]),i("v-flex",{staticStyle:{margin:"20px 0","text-align":"center"},attrs:{xs12:""}},[i("v-btn",{staticClass:"my-0 white--text mr-3 btn-login",staticStyle:{padding:"0 15px !important"},attrs:{small:"",loading:t.loading,disabled:t.loading},on:{click:t.goToPage}},[i("v-icon",{attrs:{size:"20"}},[t._v("mdi-home-circle-outline")]),t._v("  "),i("span",[t._v("Truy cập hệ thống")])],1),i("v-btn",{staticClass:"my-0 white--text mr-3 mt-3 btn-login",staticStyle:{padding:"0 15px !important"},attrs:{small:"",loading:t.loading,disabled:t.loading},on:{click:t.submitLogout}},[i("div",{staticClass:"v-btn__content"},[i("v-icon",{attrs:{size:"18"}},[t._v("mdi-logout-variant")]),t._v("  "),i("span",[t._v("Đăng xuất")])],1)])],1)],1):t._e()])]),i("div",{staticClass:"wrap-contact-info"},[i("div",{staticClass:"mb-1"},[t._v(t._s(t.$t("login.trungTamCongNgheMsg")))]),i("div",{staticClass:"mb-1"},[i("v-icon",{attrs:{size:"18",color:"#fff"}},[t._v("mdi-map-marker-outline")]),t._v("  "),i("span",[t._v(t._s(t.$t("login.headOffice")))])],1),i("div",{staticClass:"mb-1"},[i("v-icon",{attrs:{size:"18",color:"#fff"}},[t._v("mdi-phone-in-talk-outline")]),t._v("  "),i("span",[t._v("1900 0318 - (024) 3.822.2979")])],1),i("div",{staticClass:"mb-1"},[i("v-icon",{attrs:{size:"18",color:"#fff"}},[t._v("mdi-email-outline")]),t._v("  "),i("span",[t._v("bophanhotro@mt.gov.vn")])],1)]),i("div",{staticClass:"text-center"},[i("v-overlay",{attrs:{value:t.overlay}},[i("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)],1)},s=[],n=i("2b0e"),o=i("bc3a"),r=i.n(o),l=i("854a"),c=i.n(l),u=i("d3a4");c.a.options={closeButton:!0,timeOut:"5000",positionClass:"toast-top-center"};var d={name:"Login",data:()=>({publicPath:"",apiSso:"http://119.17.200.69:8379",overlay:!1,loading:!1,valid:!0,userName:"",password:"",client_secret:"",code:"",signed:!1,languages:[{flag:"vn",language:"vi",title:"Tiếng Việt"},{flag:"us",language:"en",title:"English"}]}),created(){let t=this;n["a"].$cookies.get("Token")?t.signed=!0:t.signed=!1},computed:{},methods:{changeLocale(t){u["a"].locale=t},login(){let t=this;if(t.loading||!t.userName||!t.password)return;t.loading=!0;let e={data:{username:t.userName,password:t.password,app:"dvc-mobile"}};t.$store.dispatch("login",e).then((function(e){if(t.loading=!1,e&&e.access_token)try{let i=String(e.access_token.split(".")[1]).replace(/_/g,"/"),a=JSON.parse(atob(i)),s=a&&a.hasOwnProperty("realm_access")&&a.realm_access["roles"]?a.realm_access.roles:"",n=!!s&&s.find((function(t){return"site-admin"===t}));if(s&&s.length)if(t.$cookies.set("Token",e.access_token,e.expires_in),t.$cookies.set("RefreshToken",e.refresh_token,e.refresh_expires_in),r.a.defaults.headers["Authorization"]="Bearer "+e.access_token,t.$store.commit("SET_ISSIGNED",!0),n){t.$cookies.set("admin",!0,e.expires_in);let i={hoVaTen:"Quản trị",maSoCanBo:"",viTriChucDanh:"Quản trị hệ thống",vaiTroSuDung:""};t.$cookies.set("UserInfo",i,e.expires_in),t.$cookies.set("Roles","",e.expires_in),t.goToPage()}else{let i={token:"Bearer "+e.access_token,email:a.email};t.$store.dispatch("getThongTinUserDangNhap",i).then((function(e){let i="",s="",n={hoVaTen:e.hoVaTen?e.hoVaTen:"",maSoCanBo:e.maSoCanBo?e.maSoCanBo:"",viTriChucDanh:i,vaiTroSuDung:s};if(e.viTriChucDanh&&e.viTriChucDanh.length){s=[],i=Array.from(e.viTriChucDanh,(function(t){return t.tenGoi})),a.viTriChucDanh=i,e.viTriChucDanh.forEach(t=>{if(t.vaiTroSuDung&&t.vaiTroSuDung.length){let e=Array.from(t.vaiTroSuDung,(function(t){return t.maMuc}));s=s.concat(e)}}),a.vaiTroSuDung=s;let o=s.find((function(t){return"QUANTRIHETHONG"==t}));o?t.$cookies.set("admin",!0,e.expires_in):t.$cookies.set("admin","",e.expires_in),t.$cookies.set("UserInfo",n,e.expires_in),t.$cookies.set("Roles",s,e.expires_in)}else t.$cookies.set("admin","",e.expires_in),t.$cookies.set("UserInfo",n,e.expires_in),t.$cookies.set("Roles",s,e.expires_in);setTimeout((function(){t.goToPage()}),200)})).catch((function(){t.loading=!1,c.a.error("TÀI KHOẢN CHƯA ĐƯỢC CẤP QUYỀN CÁN BỘ"),setTimeout((function(){t.submitLogout()}),500)}))}else t.loading=!1,t.overlay=!1,c.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),setTimeout((function(){t.submitLogout()}),500)}catch(i){t.loading=!1,c.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),setTimeout((function(){t.submitLogout()}),500)}else c.a.remove()})).catch((function(e){t.loading=!1,c.a.remove(),c.a.error(u["a"].t("login.saiTenDangNhapVaMatKhau"))}))},loginKeyCloak(){let t=this;if(t.loading)return;t.loading=!0;let e={uri:"http://119.17.200.69:8032/index.html"};t.$store.dispatch("loginKeyCloak",e).then((function(e){t.loading=!1,e&&(window.location.href=e.endpoint)})).catch((function(e){t.loading=!1}))},getToken(){let t=this;t.loading=!1;let e={code:t.code,redirect_uri:"http://119.17.200.69:8032/index.html"};t.$store.dispatch("getTokenKeyCloak",e).then((function(e){if(t.loading=!1,t.overlay=!1,e.access_token)try{let i=String(e.access_token.split(".")[1]).replace(/_/g,"/"),a=JSON.parse(atob(i)),s=a&&a.hasOwnProperty("realm_access")&&a.realm_access["roles"]?a.realm_access.roles:"",n=!!s&&s.find((function(t){return"site-admin"===t}));if(s&&s.length)if(t.$cookies.set("Token",e.access_token,e.expires_in),t.$cookies.set("RefreshToken",e.refresh_token,e.refresh_expires_in),r.a.defaults.headers["Authorization"]="Bearer "+e.access_token,t.$store.commit("SET_ISSIGNED",!0),n){t.$cookies.set("admin",!0,e.expires_in);let i={hoVaTen:"Quản trị",maSoCanBo:"",viTriChucDanh:"Quản trị hệ thống",vaiTroSuDung:""};t.$cookies.set("UserInfo",i,e.expires_in),t.$cookies.set("Roles","",e.expires_in),window.location.href=window.location.origin+"/#/"}else{let i={token:"Bearer "+e.access_token,email:a.email};t.$store.dispatch("getEmployee",i).then((function(e){let i=e,a=i.mappingUser.userId?i.mappingUser.userId:"",s=i.groupId?i.groupId:"";t.$cookies.set("userId",String(a),e.expires_in),t.$cookies.set("groupId",s,e.expires_in)})),t.$store.dispatch("getThongTinUserDangNhap",i).then((function(e){let i="",s="",n={hoVaTen:e.hoVaTen?e.hoVaTen:"",maSoCanBo:e.maSoCanBo?e.maSoCanBo:"",viTriChucDanh:i,vaiTroSuDung:s};if(e.viTriChucDanh&&e.viTriChucDanh.length){s=[],i=Array.from(e.viTriChucDanh,(function(t){return t.tenGoi})),a.viTriChucDanh=i,e.viTriChucDanh.forEach(t=>{if(t.vaiTroSuDung&&t.vaiTroSuDung.length){let e=Array.from(t.vaiTroSuDung,(function(t){return t.maMuc}));s=s.concat(e)}}),a.vaiTroSuDung=s;let n=s.find((function(t){return"QUANTRIHETHONG"==t}));n?t.$cookies.set("admin",!0,e.expires_in):t.$cookies.set("admin","",e.expires_in)}else t.$cookies.set("admin","",e.expires_in),t.$cookies.set("UserInfo",n,e.expires_in),t.$cookies.set("Roles",s,e.expires_in);t.$cookies.set("UserInfo",n,e.expires_in),t.$cookies.set("Roles",s,e.expires_in),setTimeout((function(){window.location.href=window.location.origin+"/#/"}),200)})).catch((function(){t.loading=!1,t.overlay=!1,c.a.error("TÀI KHOẢN CHƯA ĐƯỢC CẤP QUYỀN CÁN BỘ"),setTimeout((function(){t.submitLogout()}),500)}))}else t.loading=!1,t.overlay=!1,c.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),setTimeout((function(){t.submitLogout()}),500)}catch(i){t.loading=!1,t.overlay=!1,c.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),setTimeout((function(){t.submitLogout()}),500)}})).catch((function(e){t.loading=!1,t.overlay=!1,c.a.error("Đăng nhập không thành công")}))},submitLogout(){let t=this;t.signed=!1,t.$store.commit("SET_ISSIGNED",!1),localStorage.setItem("user",null),t.$cookies.set("Token",""),t.$cookies.set("RefreshToken","")},goToPage(){let t=this;t.isAdmin||t.checkRole("THEMMOIBAOCAO")?t.$router.push({path:"/"}):(t.checkRole("XEMBAOCAODONVI")||t.checkRole("XEMTATCABAOCAO"))&&t.$router.push({path:"/bao-cao/cho-xu-ly"})}}},h=d,g=(i("a4e6"),i("2877")),p=i("6544"),f=i.n(p),m=i("8336"),v=i("a523"),_=i("0e8f"),T=i("4bd4"),y=i("132d"),k=i("a797"),x=i("490a"),C=i("8654"),b=Object(g["a"])(h,a,s,!1,null,null,null);e["default"]=b.exports;f()(b,{VBtn:m["a"],VContainer:v["a"],VFlex:_["a"],VForm:T["a"],VIcon:y["a"],VOverlay:k["a"],VProgressCircular:x["a"],VTextField:C["a"]})},a797:function(t,e,i){"use strict";i("3c93");var a=i("a9ad"),s=i("7560"),n=i("f2e7"),o=i("58df");e["a"]=Object(o["a"])(a["a"],s["a"],n["a"]).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim(){const t=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",t)},classes(){return{"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive,...this.themeClasses}},computedOpacity(){return Number(this.isActive?this.opacity:0)},styles(){return{zIndex:this.zIndex}}},methods:{genContent(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render(t){const e=[this.__scrim];return this.isActive&&e.push(this.genContent()),t("div",{staticClass:"v-overlay",on:this.$listeners,class:this.classes,style:this.styles},e)}})}}]);