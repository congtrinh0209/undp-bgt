(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a659ad1e"],{"0e8f":function(e,t,i){"use strict";i("20f6");var a=i("e8f2");t["a"]=Object(a["a"])("flex")},"3c93":function(e,t,i){},"4bd4":function(e,t,i){"use strict";var a=i("58df"),s=i("7e2b"),o=i("3206");t["a"]=Object(a["a"])(s["a"],Object(o["b"])("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>e.$watch("hasError",t=>{this.$set(this.errorBag,e._uid,t)},{immediate:!0}),i={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=e.$watch("shouldValidate",a=>{a&&(this.errorBag.hasOwnProperty(e._uid)||(i.valid=t(e)))}):i.valid=t(e),i},validate(){return 0===this.inputs.filter(e=>!e.validate(!0)).length},reset(){this.inputs.forEach(e=>e.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(e=>e.resetValidation()),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find(t=>t._uid===e._uid);if(!t)return;const i=this.watchers.find(e=>e._uid===t._uid);i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter(e=>e._uid!==t._uid),this.inputs=this.inputs.filter(e=>e._uid!==t._uid),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},this.$slots.default)}})},"6a16":function(e,t,i){},a523:function(e,t,i){"use strict";i("20f6"),i("4b85");var a=i("e8f2"),s=i("d9f7");t["a"]=Object(a["a"])("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(e,{props:t,data:i,children:a}){let o;const{attrs:n}=i;return n&&(i.attrs={},o=Object.keys(n).filter(e=>{if("slot"===e)return!1;const t=n[e];return e.startsWith("data-")?(i.attrs[e]=t,!1):t||"string"===typeof t})),t.id&&(i.domProps=i.domProps||{},i.domProps.id=t.id),e(t.tag,Object(s["a"])(i,{staticClass:"container",class:Array({"container--fluid":t.fluid}).concat(o||[])}),a)}})},a55b:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrap-login"},[i("v-container",{staticClass:"px-0 pt-0",attrs:{id:"login-page",fluid:"",tag:"section"}},[i("div",{staticClass:"container-wrap"},[i("div",{staticClass:"wrap-title"},[i("div",{staticClass:"d-flex justify-end py-0 pb-0 my-0 px-5"},e._l(e.languages,(function(t){return i("button",{key:t.title,on:{click:function(i){return e.changeLocale(t.language)}}},[i("flag",{attrs:{iso:t.flag,squared:!1}}),e._v(" "+e._s(t.title)+" ")],1)})),0),i("v-flex",{staticStyle:{"text-align":"center"}},[i("img",{staticClass:"img-login-logo",attrs:{src:e.publicPath+"/images/image-logo.png?t=93111413"}})]),i("v-flex",{staticClass:"wrap-title pt-1 mb-2"},[i("div",{staticClass:"text-1"},[e._v(e._s(e.$t("login.welcomeMsg1"))+" ")]),i("div",{staticClass:"text-2"},[e._v(e._s(e.$t("login.welcomeMsg2")))])])],1),e.signed?e._e():i("div",{staticClass:"wrap-form px-4 py-3"},[i("div",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-flex",{staticClass:"action-title mb-5",staticStyle:{"text-align":"center","font-size":"22px","font-family":"'Roboto Slab'",color:"#fff","font-weight":"700"},attrs:{xs12:""}},[i("div",[e._v(e._s(e.$t("login.loginMsg")))])]),i("v-flex",{attrs:{xs12:""}},[i("span",{staticStyle:{color:"white"}},[e._v(e._s(e.$t("login.tenDangNhap")))]),i("v-text-field",{staticClass:"input-text",attrs:{dense:"",rules:[function(t){return!!t||e.$t("login.batBuocTenDangNhap")}],required:"","prepend-inner-icon":"mdi-account","hide-details":"auto"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),i("v-flex",{staticStyle:{"margin-top":"15px"},attrs:{xs12:""}},[i("span",{staticStyle:{color:"white"}},[e._v(e._s(e.$t("login.matKhau")))]),i("v-text-field",{staticClass:"input-text",attrs:{dense:"",type:"password",rules:[function(t){return!!t||e.$t("login.batBuocMatKhau")}],required:"","prepend-inner-icon":"mdi-key","hide-details":"auto"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),i("v-flex",{staticClass:"wrap-btn-login",staticStyle:{"margin-top":"30px","margin-bottom":"20px"},attrs:{xs12:""}},[i("v-btn",{staticClass:"my-0 white--text mr-3 btn-login",staticStyle:{padding:"0 15px !important"},attrs:{loading:e.loading,disabled:e.loading},on:{click:e.login}},[i("v-icon",{attrs:{size:"20"}},[e._v("mdi-login")]),e._v("  "+e._s(e.$t("login.loginMsg"))+" ")],1)],1)],1)],1)]),e.signed?i("div",{staticClass:"wrap-form px-3 py-3"},[i("div",{staticClass:"text-login"},[e._v("TÀI KHOẢN ĐÃ ĐĂNG NHẬP HỆ THỐNG")]),i("v-flex",{staticStyle:{margin:"20px 0","text-align":"center"},attrs:{xs12:""}},[i("v-btn",{staticClass:"my-0 white--text mr-3 btn-login",staticStyle:{padding:"0 15px !important"},attrs:{small:"",loading:e.loading,disabled:e.loading},on:{click:e.goToPage}},[i("v-icon",{attrs:{size:"20"}},[e._v("mdi-home-circle-outline")]),e._v("  "),i("span",[e._v("Truy cập hệ thống")])],1),i("v-btn",{staticClass:"my-0 white--text mr-3 mt-3 btn-login",staticStyle:{padding:"0 15px !important"},attrs:{small:"",loading:e.loading,disabled:e.loading},on:{click:e.submitLogout}},[i("div",{staticClass:"v-btn__content"},[i("v-icon",{attrs:{size:"18"}},[e._v("mdi-logout-variant")]),e._v("  "),i("span",[e._v("Đăng xuất")])],1)])],1)],1):e._e()])]),i("div",{staticClass:"wrap-contact-info"},[i("div",{staticClass:"mb-1"},[e._v(e._s(e.$t("login.trungTamCongNgheMsg")))]),i("div",{staticClass:"mb-1"},[i("v-icon",{attrs:{size:"18",color:"#fff"}},[e._v("mdi-map-marker-outline")]),e._v("  "),i("span",[e._v(e._s(e.$t("login.headOffice")))])],1),i("div",{staticClass:"mb-1"},[i("v-icon",{attrs:{size:"18",color:"#fff"}},[e._v("mdi-phone-in-talk-outline")]),e._v("  "),i("span",[e._v("1900 0318 - (024) 3.822.2979")])],1),i("div",{staticClass:"mb-1"},[i("v-icon",{attrs:{size:"18",color:"#fff"}},[e._v("mdi-email-outline")]),e._v("  "),i("span",[e._v("bophanhotro@mt.gov.vn")])],1)]),i("div",{staticClass:"text-center"},[i("v-overlay",{attrs:{value:e.overlay}},[i("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)],1)},s=[],o=i("2b0e"),n=i("bc3a"),r=i.n(n),l=i("854a"),c=i.n(l),u=i("d3a4");c.a.options={closeButton:!0,timeOut:"5000",positionClass:"toast-top-center"};var d={name:"Login",data:()=>({publicPath:"",apiSso:"http://119.17.200.69:8379",overlay:!1,loading:!1,valid:!0,userName:"",password:"",client_secret:"",code:"",signed:!1,languages:[{flag:"vn",language:"vi",title:"Tiếng Việt"},{flag:"us",language:"en",title:"English"}]}),created(){let e=this;o["a"].$cookies.get("Token")?e.signed=!0:e.signed=!1},computed:{},methods:{changeLocale(e){u["a"].locale=e;try{localStorage.setItem("i18nLocal",e)}catch(t){}},login(){let e=this;if(e.loading||!e.userName||!e.password)return;e.loading=!0;let t={data:{username:e.userName,password:e.password,app:"dvc-mobile"}};e.$store.dispatch("login",t).then((function(t){if(e.loading=!1,t&&t.access_token)try{let i=String(t.access_token.split(".")[1]).replace(/_/g,"/"),a=JSON.parse(atob(i)),s=a&&a.hasOwnProperty("realm_access")&&a.realm_access["roles"]?a.realm_access.roles:"",o=!!s&&s.find((function(e){return"site-admin"===e}));if(s&&s.length)if(e.$cookies.set("Token",t.access_token,t.expires_in),e.$cookies.set("RefreshToken",t.refresh_token,t.refresh_expires_in),r.a.defaults.headers["Authorization"]="Bearer "+t.access_token,e.$store.commit("SET_ISSIGNED",!0),o){e.$cookies.set("admin",!0,t.expires_in);let i={hoVaTen:"Quản trị",maSoCanBo:"",viTriChucDanh:"Quản trị hệ thống",vaiTroSuDung:""};e.$cookies.set("UserInfo",i,t.expires_in),e.$cookies.set("Roles","",t.expires_in),e.goToPage()}else{let i={token:"Bearer "+t.access_token,email:a.email};e.$store.dispatch("getThongTinUserDangNhap",i).then((function(t){let i="",s="",o={hoVaTen:t.hoVaTen?t.hoVaTen:"",maSoCanBo:t.maSoCanBo?t.maSoCanBo:"",viTriChucDanh:i,vaiTroSuDung:s};if(t.viTriChucDanh&&t.viTriChucDanh.length){s=[],i=Array.from(t.viTriChucDanh,(function(e){return e.tenGoi})),a.viTriChucDanh=i,t.viTriChucDanh.forEach(e=>{if(e.vaiTroSuDung&&e.vaiTroSuDung.length){let t=Array.from(e.vaiTroSuDung,(function(e){return e.maMuc}));s=s.concat(t)}}),a.vaiTroSuDung=s;let n=s.find((function(e){return"QUANTRIHETHONG"==e}));n?e.$cookies.set("admin",!0,t.expires_in):e.$cookies.set("admin","",t.expires_in),e.$cookies.set("UserInfo",o,t.expires_in),e.$cookies.set("Roles",s,t.expires_in)}else e.$cookies.set("admin","",t.expires_in),e.$cookies.set("UserInfo",o,t.expires_in),e.$cookies.set("Roles",s,t.expires_in);if(t.maSoCanBo){let i={collectionName:"canbo",data:{keyword:e.keywordSearch,page:0,size:5,orderFields:"hoVaTen",orderTypes:"asc",maSoCanBo:t.maSoCanBo}};e.$store.dispatch("collectionFilter",i).then((function(e){let t=e.content[0];t&&localStorage.setItem("EmployeeInfo",JSON.stringify(t))})).catch((function(){}))}setTimeout((function(){e.goToPage()}),200)})).catch((function(){e.loading=!1,c.a.error("TÀI KHOẢN CHƯA ĐƯỢC CẤP QUYỀN CÁN BỘ"),setTimeout((function(){e.submitLogout()}),500)}))}else e.loading=!1,e.overlay=!1,c.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),setTimeout((function(){e.submitLogout()}),500)}catch(i){e.loading=!1,c.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),setTimeout((function(){e.submitLogout()}),500)}else c.a.remove()})).catch((function(t){e.loading=!1,c.a.remove(),c.a.error(u["a"].t("login.saiTenDangNhapVaMatKhau"))}))},loginKeyCloak(){let e=this;if(e.loading)return;e.loading=!0;let t={uri:"http://119.17.200.69:8032/index.html"};e.$store.dispatch("loginKeyCloak",t).then((function(t){e.loading=!1,t&&(window.location.href=t.endpoint)})).catch((function(t){e.loading=!1}))},getToken(){let e=this;e.loading=!1;let t={code:e.code,redirect_uri:"http://119.17.200.69:8032/index.html"};e.$store.dispatch("getTokenKeyCloak",t).then((function(t){if(e.loading=!1,e.overlay=!1,t.access_token)try{let i=String(t.access_token.split(".")[1]).replace(/_/g,"/"),a=JSON.parse(atob(i)),s=a&&a.hasOwnProperty("realm_access")&&a.realm_access["roles"]?a.realm_access.roles:"",o=!!s&&s.find((function(e){return"site-admin"===e}));if(s&&s.length)if(e.$cookies.set("Token",t.access_token,t.expires_in),e.$cookies.set("RefreshToken",t.refresh_token,t.refresh_expires_in),r.a.defaults.headers["Authorization"]="Bearer "+t.access_token,e.$store.commit("SET_ISSIGNED",!0),o){e.$cookies.set("admin",!0,t.expires_in);let i={hoVaTen:"Quản trị",maSoCanBo:"",viTriChucDanh:"Quản trị hệ thống",vaiTroSuDung:""};e.$cookies.set("UserInfo",i,t.expires_in),e.$cookies.set("Roles","",t.expires_in),window.location.href=window.location.origin+"/#/"}else{let i={token:"Bearer "+t.access_token,email:a.email};e.$store.dispatch("getEmployee",i).then((function(t){let i=t,a=i.mappingUser.userId?i.mappingUser.userId:"",s=i.groupId?i.groupId:"";e.$cookies.set("userId",String(a),t.expires_in),e.$cookies.set("groupId",s,t.expires_in)})),e.$store.dispatch("getThongTinUserDangNhap",i).then((function(t){let i="",s="",o={hoVaTen:t.hoVaTen?t.hoVaTen:"",maSoCanBo:t.maSoCanBo?t.maSoCanBo:"",viTriChucDanh:i,vaiTroSuDung:s};if(t.viTriChucDanh&&t.viTriChucDanh.length){s=[],i=Array.from(t.viTriChucDanh,(function(e){return e.tenGoi})),a.viTriChucDanh=i,t.viTriChucDanh.forEach(e=>{if(e.vaiTroSuDung&&e.vaiTroSuDung.length){let t=Array.from(e.vaiTroSuDung,(function(e){return e.maMuc}));s=s.concat(t)}}),a.vaiTroSuDung=s;let o=s.find((function(e){return"QUANTRIHETHONG"==e}));o?e.$cookies.set("admin",!0,t.expires_in):e.$cookies.set("admin","",t.expires_in)}else e.$cookies.set("admin","",t.expires_in),e.$cookies.set("UserInfo",o,t.expires_in),e.$cookies.set("Roles",s,t.expires_in);e.$cookies.set("UserInfo",o,t.expires_in),e.$cookies.set("Roles",s,t.expires_in),setTimeout((function(){window.location.href=window.location.origin+"/#/"}),200)})).catch((function(){e.loading=!1,e.overlay=!1,c.a.error("TÀI KHOẢN CHƯA ĐƯỢC CẤP QUYỀN CÁN BỘ"),setTimeout((function(){e.submitLogout()}),500)}))}else e.loading=!1,e.overlay=!1,c.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),setTimeout((function(){e.submitLogout()}),500)}catch(i){e.loading=!1,e.overlay=!1,c.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),setTimeout((function(){e.submitLogout()}),500)}})).catch((function(t){e.loading=!1,e.overlay=!1,c.a.error("Đăng nhập không thành công")}))},submitLogout(){let e=this;e.signed=!1,e.$store.commit("SET_ISSIGNED",!1),localStorage.setItem("user",null),e.$cookies.set("Token",""),e.$cookies.set("RefreshToken","")},goToPage(){let e=this;e.isAdmin||e.checkRole("THEMMOIBAOCAO")?e.$router.push({path:"/"}):(e.checkRole("XEMBAOCAODONVI")||e.checkRole("XEMTATCABAOCAO"))&&e.$router.push({path:"/bao-cao/cho-xu-ly"})}}},h=d,g=(i("b9aa"),i("2877")),p=i("6544"),f=i.n(p),m=i("8336"),v=i("a523"),_=i("0e8f"),y=i("4bd4"),T=i("132d"),k=i("a797"),C=i("490a"),x=i("8654"),b=Object(g["a"])(h,a,s,!1,null,null,null);t["default"]=b.exports;f()(b,{VBtn:m["a"],VContainer:v["a"],VFlex:_["a"],VForm:y["a"],VIcon:T["a"],VOverlay:k["a"],VProgressCircular:C["a"],VTextField:x["a"]})},a797:function(e,t,i){"use strict";i("3c93");var a=i("a9ad"),s=i("7560"),o=i("f2e7"),n=i("58df");t["a"]=Object(n["a"])(a["a"],s["a"],o["a"]).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim(){const e=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",e)},classes(){return{"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive,...this.themeClasses}},computedOpacity(){return Number(this.isActive?this.opacity:0)},styles(){return{zIndex:this.zIndex}}},methods:{genContent(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render(e){const t=[this.__scrim];return this.isActive&&t.push(this.genContent()),e("div",{staticClass:"v-overlay",on:this.$listeners,class:this.classes,style:this.styles},t)}})},b9aa:function(e,t,i){"use strict";i("6a16")}}]);